# 接続確立待ち状態
サーバーとクライアントのTCP接続が確立されると、クライアントは接続確立待ち状態に移行します。  
この状態では順次処理のみが行われるため、時系列に沿って説明します。  

接続直後、サーバーはクライアントにメッセージ`connected`を送信します。このメッセージを送信した後、サーバーはクライアントからの後続のメッセージを待機します。この間、別のクライアントからのTCP接続があった場合は保留されます。  
クライアントはこの後、プレイヤー名(任意の文字列)、続いてアプリケーションID(long intの10進文字列表現)をそれぞれサーバーに送信します。  
サーバーが二つのメッセージを適切に処理できた場合、クライアントは[ロビー内状態](in_lobby.md)に移行します。メッセージの処理に失敗した場合、このクライアントとのTCP接続は破棄されます。この時点で、保留されていた別のクライアントからのTCP接続が再開されます。